<!DOCTYPE html>
<html>
<head>
    <title>CATS-Portfolio Item Health Summary-1.0.1</title>
    <!--  (c) 2017 CA Technologies.  All Rights Reserved. -->
    <!--  Build Date: Mon Mar 12 2018 22:13:00 GMT+0000 (UTC) -->

    <script type="text/javascript">
        var APP_BUILD_DATE = "Mon Mar 12 2018 22:13:00 GMT+0000 (UTC)";
        var ARTIFACT = "";
        var BUILDER  = "ec2-user";
        var CHECKSUM = 15764615634;
    </script>

    <script type="text/javascript" src="/apps/2.1/sdk.js"></script>
    <!-- our highcharts (needed so that we can add patterns)
    <script type="text/javascript" src="/apps/2.1/lib/analytics/analytics-all.js"></script>
    -->


    <script type="text/javascript">
        Rally.onReady(function() {
            String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return this.substr(!b||0>b?0:+b,a.length)===a}),Ext.define("TsSvgIcons",{statics:{better:'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5" style="enable-background:new 0 0 47.5 47.5;" xml:space="preserve" version="1.1" id="svg2"><metadata id="metadata8"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/></cc:Work></rdf:RDF></metadata><defs id="defs6"><clipPath id="clipPath16" clipPathUnits="userSpaceOnUse"><path id="path18" d="M 0,38 38,38 38,0 0,0 0,38 Z"/></clipPath></defs><g transform="matrix(1.25,0,0,-1.25,0,47.5)" id="g10"><g id="g12"><g clip-path="url(#clipPath16)" id="g14"><g transform="translate(36,19)" id="g20"><path id="path22" style="fill:#ffcc4d;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m 0,0 c 0,-9.389 -7.611,-17 -17,-17 -9.388,0 -17,7.611 -17,17 0,9.388 7.612,17 17,17 C -7.611,17 0,9.388 0,0"/></g><g transform="translate(11,24)" id="g24"><path id="path26" style="fill:#664500;fill-opacity:1;fill-rule:nonzero;stroke:none" d="M 0,0 C 0,0 0,2 2,2 4,2 4,0 4,0 l 0,-2 c 0,0 0,-2 -2,-2 -2,0 -2,2 -2,2 l 0,2 z"/></g><g transform="translate(23,24)" id="g28"><path id="path30" style="fill:#664500;fill-opacity:1;fill-rule:nonzero;stroke:none" d="M 0,0 C 0,0 0,2 2,2 4,2 4,0 4,0 l 0,-2 c 0,0 0,-2 -2,-2 -2,0 -2,2 -2,2 l 0,2 z"/></g><g transform="translate(28.335,14.3711)" id="g32"><path id="path34" style="fill:#664500;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m 0,0 c -0.178,0.161 -0.444,0.171 -0.635,0.029 -0.039,-0.029 -3.922,-2.9 -8.7,-2.9 -4.766,0 -8.662,2.871 -8.7,2.9 -0.191,0.142 -0.457,0.13 -0.635,-0.029 -0.177,-0.16 -0.217,-0.424 -0.094,-0.628 0.129,-0.215 3.217,-5.243 9.429,-5.243 6.212,0 9.301,5.028 9.429,5.243 C 0.217,-0.423 0.178,-0.16 0,0"/></g></g></g></g></svg>',worse:'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5" style="enable-background:new 0 0 47.5 47.5;" xml:space="preserve" version="1.1" id="svg2"><metadata id="metadata8"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/></cc:Work></rdf:RDF></metadata><defs id="defs6"><clipPath id="clipPath16" clipPathUnits="userSpaceOnUse"><path id="path18" d="M 0,38 38,38 38,0 0,0 0,38 Z"/></clipPath></defs><g transform="matrix(1.25,0,0,-1.25,0,47.5)" id="g10"><g id="g12"><g clip-path="url(#clipPath16)" id="g14"><g transform="translate(36,19)" id="g20"><path id="path22" style="fill:#ffcc4d;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m 0,0 c 0,-9.389 -7.611,-17 -17,-17 -9.388,0 -17,7.611 -17,17 0,9.388 7.612,17 17,17 C -7.611,17 0,9.388 0,0"/></g><g transform="translate(11,24)" id="g24"><path id="path26" style="fill:#664500;fill-opacity:1;fill-rule:nonzero;stroke:none" d="M 0,0 C 0,0 0,2 2,2 4,2 4,0 4,0 l 0,-2 c 0,0 0,-2 -2,-2 -2,0 -2,2 -2,2 l 0,2 z"/></g><g transform="translate(23,24)" id="g28"><path id="path30" style="fill:#664500;fill-opacity:1;fill-rule:nonzero;stroke:none" d="M 0,0 C 0,0 0,2 2,2 4,2 4,0 4,0 l 0,-2 c 0,0 0,-2 -2,-2 -2,0 -2,2 -2,2 l 0,2 z"/></g><g transform="translate(9.6652,8.6286)" id="g32"><path id="path34" style="fill:#664500;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m 0,0 c 0.178,-0.161 0.444,-0.171 0.635,-0.029 0.039,0.029 3.922,2.9 8.7,2.9 4.766,0 8.662,-2.871 8.7,-2.9 0.191,-0.142 0.457,-0.13 0.635,0.029 0.177,0.16 0.217,0.424 0.094,0.628 C 18.635,0.843 15.547,5.871 9.335,5.871 3.123,5.871 0.034,0.843 -0.094,0.628 -0.217,0.423 -0.178,0.16 0,0"/></g></g></g></g></svg>',neutral:'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 47.5" style="enable-background:new 0 0 47.5 47.5;" xml:space="preserve" version="1.1" id="svg2"><metadata id="metadata8"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/></cc:Work></rdf:RDF></metadata><defs id="defs6"><clipPath id="clipPath16" clipPathUnits="userSpaceOnUse"><path id="path18" d="M 0,38 38,38 38,0 0,0 0,38 Z"/></clipPath></defs><g transform="matrix(1.25,0,0,-1.25,0,47.5)" id="g10"><g id="g12"><g clip-path="url(#clipPath16)" id="g14"><g transform="translate(36,19)" id="g20"><path id="path22" style="fill:#ffcc4d;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m 0,0 c 0,-9.389 -7.611,-17 -17,-17 -9.388,0 -17,7.611 -17,17 0,9.388 7.612,17 17,17 C -7.611,17 0,9.388 0,0"/></g><g transform="translate(15,20.5)" id="g24"><path id="path26" style="fill:#664500;fill-opacity:1;fill-rule:nonzero;stroke:none" d="M 0,0 C 0,-1.934 -1.119,-3.5 -2.5,-3.5 -3.881,-3.5 -5,-1.934 -5,0 -5,1.933 -3.881,3.5 -2.5,3.5 -1.119,3.5 0,1.933 0,0"/></g><g transform="translate(28,20.5)" id="g28"><path id="path30" style="fill:#664500;fill-opacity:1;fill-rule:nonzero;stroke:none" d="M 0,0 C 0,-1.934 -1.119,-3.5 -2.5,-3.5 -3.881,-3.5 -5,-1.934 -5,0 -5,1.933 -3.881,3.5 -2.5,3.5 -1.119,3.5 0,1.933 0,0"/></g><g transform="translate(26,11)" id="g32"><path id="path34" style="fill:#664500;fill-opacity:1;fill-rule:nonzero;stroke:none" d="m 0,0 -14,0 c -0.552,0 -1,0.447 -1,1 0,0.553 0.448,1 1,1 L 0,2 C 0.553,2 1,1.553 1,1 1,0.447 0.553,0 0,0"/></g></g></g></g></svg>'}}),Ext.define("TsSummaryRow",{extend:"Ext.data.Model",fields:[{name:"CycleTimeMedian",type:"int",defaultValue:NaN},{name:"CycleTimeCurrentPeriod",type:"int",defaultValue:NaN},{name:"CycleTimeTrend",type:"string",defaultValue:"Loading"},{name:"ThroughputMedian",type:"float",defaultValue:NaN},{name:"ThroughputTrend",type:"string",defaultValue:"Loading"},{name:"FeatureWipAverage",type:"float",defaultValue:NaN},{name:"ActiveFeatures",type:"int",defaultValue:NaN},{name:"TeamCount",type:"int",defaultValue:NaN}]}),Ext.define("TsFeatureGroup",{extend:"Ext.data.Model",fields:[{name:"PortfolioItem"},{name:"Features"},{name:"LeafProjectsHash"}]}),Ext.override(Rally.data.wsapi.TreeStore,{_getChildNodeFilters:function(a){var b=a.self.typePath,c=this._getChildTypePaths([b]),d=this._getParentFieldNames(c,b);if(d.length){var e=Rally.data.wsapi.Filter.or(_.map(d,function(b){return{property:b,operator:"=",value:a.get("_ref")}}));return this.childFilters?[e.and(this.childFilters)]:[e]}return[]},filterChildren:function(a){this.childFilters=a,this.load()}}),Ext.define("TsConstants",{statics:{ID:{PORTFOLIO_ITEM_TYPE_STATE:"PORTFOLIO_ITEM_TYPE_STATE"},SETTINGS:{PERIOD_LENGTH:"PERIOD_LENGTH",INCLUDED_PROJECT_TEAM_TYPES:"INCLUDED_PROJECT_TEAM_TYPES",PER_TEAM_WIP_MAX:"PER_TEAM_WIP_MAX",PI_TYPES_ALWAYS_SHOWN:["PortfolioItem/Group","PortfolioItem/Theme"],SHOW_WIP_RAW_DATA:"SHOW_WIP_RAW_DATA",SHOW_TREND_RAW_DATA:"SHOW_TREND_RAW_DATA"},LABELS:{WIP:"Active Features Per-Team (Average)",SHOW_WIP_RAW_DATA:"Show Active Features and Team counts",SHOW_TREND_RAW_DATA:"Show Trend Values",SHOW_DONE_PIS:"Show Done Items",SELECTABLE_PORTFOLIO_ITEM_TYPE:"Affiliate"},SELECTABLE_PORTFOLIO_ITEM_TYPE:"PortfolioItem/Group",ROW_METRICS_PORTFOLIO_ITEM_TYPE:"PortfolioItem/Feature"}}),Ext.define("TsMetricsUtils",function(a){function b(a){var b=!0;return a.get("_type").startsWith("portfolioitem/theme")?b=!1:a.get("_type").startsWith("portfolioitem")||(b=!1),b}function c(a){String.prototype.startsWith=function(a,b){return this.substr(!b||0>b?0:+b,a.length)===a}}function d(a){var b=_.unique(_.sortBy(a)),c=b.length,d=void 0;return c>0&&(d=c%2==0?(b[c/2-1]+b[c/2])/2:b[Math.floor(c/2)]),Math.ceil(d)}function e(a,b){var c=Ext.Date.parse(a,"c",!0),d=Ext.Date.parse(b,"c",!0),e=void 0,f=Ext.Date.getDayOfYear(c),g=Ext.Date.getDayOfYear(d);if(g>=f)e=g-f;else{var h=Ext.Date.isLeapYear(c)?365:364;e=g+h-f}return e}return{statics:{getMedian:d,getDaysElapsed:e,startsWith:c,showMetrics:b}}}),Ext.define("TsMetricsMgr",function(a){function b(a){_.forEach(a,function(a){TsMetricsUtils.showMetrics(a)&&f(a).then(function(b){var c=a.get("ObjectID");return g([c],[TsConstants.ROW_METRICS_PORTFOLIO_ITEM_TYPE]).then(function(c){return Ext.create("TsFeatureGroup",{PortfolioItem:a,Features:c,LeafProjectsHash:b||{}})})}).then(function(a){return d([a])}).then(function(b){return b.length>1&&console.error("Unexpected number of summary rows for a portfolio item"),c(a,b[0])})})}function c(a,b){var c=TsSummaryRow.getFields();return _.forEach(c,function(c){"id"!=c.name&&a.set(c.name,b.get(c.name))}),a}function d(a){var b=_.map(a,function(a){var b=(a.get("PortfolioItem"),e(a)),c=TsMetricsUtils.getMedian(b.allCycleTimes),d=TsMetricsUtils.getMedian(b.priorPeriodCycleTimes),f=TsMetricsUtils.getMedian(b.currentPeriodCycleTimes),g=0,h=a.get("LeafProjectsHash"),i=0;return h&&(i=Object.keys(h).length,g=b.workInProgress/i),Ext.create("TsSummaryRow",{CycleTimeMedian:c,CycleTimeCurrentPeriod:f,CycleTimeTrend:f-d,ThroughputMedian:b.currentPeriodThroughput,ThroughputTrend:b.currentPeriodThroughput-b.priorPeriodThroughput,FeatureWipAverage:g,ActiveFeatures:b.workInProgress,TeamCount:i})});return b}function e(a){var b=Rally.getApp().getSetting(TsConstants.SETTINGS.PERIOD_LENGTH)||TsConstants.SETTINGS.PERIOD_LENGTH,c=new Date,d=Ext.Date.subtract(c,Ext.Date.DAY,2*b),e=Ext.Date.subtract(c,Ext.Date.DAY,b),f=Ext.Date.subtract(e,Ext.Date.DAY,1),g=Ext.Date.subtract(c,Ext.Date.DAY,1),h=_.reduce(a.get("Features"),function(a,b){var c=b.raw.ActualStartDate?Ext.Date.parse(b.raw.ActualStartDate,"c"):null,h=b.raw.ActualEndDate?Ext.Date.parse(b.raw.ActualEndDate,"c"):null;if(c&&h){var i=TsMetricsUtils.getDaysElapsed(c,h);a.allCycleTimes.push(i),Ext.Date.between(h,d,f)?(a.priorPeriodCycleTimes.push(i),a.priorPeriodThroughput++):Ext.Date.between(h,e,g)&&(a.currentPeriodCycleTimes.push(i),a.currentPeriodThroughput++)}return c&&!h&&a.workInProgress++,a},{allCycleTimes:[],priorPeriodCycleTimes:[],currentPeriodCycleTimes:[],priorPeriodThroughput:0,currentPeriodThroughput:0,workInProgress:0,projects:[]});return h}function f(a){var b={},c=a.get("Project").ObjectID,d=Ext.create("Deft.Deferred"),e=Rally.getApp().getSetting(TsConstants.SETTINGS.INCLUDED_PROJECT_TEAM_TYPES).split(","),f=a.get("Project");if(f.Children&&0!=f.Children.Count){var g=Rally.data.wsapi.Filter.or(_.map(e,function(a){return{property:"c_TeamType",value:a}})),h=Rally.data.wsapi.Filter.or(_.map(_.range(1,10),function(a){var b=[];do b.push("Parent");while(b.length<a);return{property:b.join(".")+".ObjectID",value:c}})).and({property:"Children.ObjectID",value:null});Ext.create("Rally.data.wsapi.Store",{model:"Project",autoLoad:!0,filters:g.and(h),fetch:["Children","Name","c_TeamType"],listeners:{scope:this,load:function(a,e,f){f?(_.forEach(e,function(a){b[a.get("ObjectID")]=a.get("Name")}),d.resolve(b)):d.reject("Unable to load child projects for Object ID "+c)}}})}else _.contains(e,f.c_TeamType||"")&&(b[f.ObjectID]=f.Name),d.resolve(b);return d.getPromise()}function g(a,b,c){var d=Ext.create("Deft.Deferred"),e=c;return e||(e=[]),e.push({property:"_TypeHierarchy",operator:"in",value:b}),e.push({property:"__At",value:"current"}),e.push({property:"_ItemHierarchy",operator:"in",value:a}),Ext.create("Rally.data.lookback.SnapshotStore",{autoLoad:!0,limit:1/0,filters:e,fetch:["FormattedID","Name","ActualStartDate","ActualEndDate","Project","PortfolioItemType","PortfolioItemTypeName"],listeners:{load:function(b,c,e){e?d.resolve(c):d.reject("Unable to load descendents for Object IDs "+a)}}}),d.getPromise()}return{buildMetrics:b}}),Ext.define("com.ca.TechnicalServices.PortfolioItemHealthSummary",{extend:"Rally.app.App",componentCls:"app",items:[{xtype:"form",itemId:"controlsArea",padding:"0 0 10 0",bodyPadding:5},{xtype:"container",itemId:"gridArea"}],integrationHeaders:{name:"com.ca.TechnicalServices.PortfolioItemHealthSummary"},selectedObjectId:void 0,showDonePis:!0,config:{defaultSettings:{PERIOD_LENGTH:30,INCLUDED_PROJECT_TEAM_TYPES:"Agile",PER_TEAM_WIP_MAX:4,SHOW_WIP_RAW_DATA:!1,SHOW_TREND_RAW_DATA:!1}},launch:function(){this.metricsMgr=new TsMetricsMgr,this.down("#controlsArea").add({xtype:"rallysearchcombobox",storeConfig:{model:TsConstants.SELECTABLE_PORTFOLIO_ITEM_TYPE,autoLoad:!0},stateful:!0,stateId:TsConstants.ID.PORTFOLIO_ITEM_TYPE_STATE,fieldLabel:TsConstants.LABELS.SELECTABLE_PORTFOLIO_ITEM_TYPE,listeners:{scope:this,change:function(a,b){this.selectedObjectId=a.getRecord().get("ObjectID"),this.addGrid()}}}),this.down("#controlsArea").add({xtype:"rallycheckboxfield",fieldLabel:TsConstants.LABELS.SHOW_DONE_PIS,value:this.showDonePis,listeners:{scope:this,change:function(a,b,c){b!=c&&(this.showDonePis=b,this.addGrid())}}})},addGrid:function(){var a,b=Rally.getApp().getSetting(TsConstants.SETTINGS.PERIOD_LENGTH),c=Ext.create("Rally.data.wsapi.Filter",{property:"Parent.ObjectID",value:this.selectedObjectId});if(0==this.showDonePis){var d=[{property:"ActualEndDate",value:"null"}];_.forEach(TsConstants.SETTINGS.PI_TYPES_ALWAYS_SHOWN,function(a){d.push({property:"PortfolioItemType.TypePath",operator:"!=",value:a})}),a=Rally.data.wsapi.Filter.and(d)}Ext.create("Rally.data.wsapi.TreeStoreBuilder").build({models:["PortfolioItem/Theme"],autoLoad:!0,enableHierarchy:!0,filters:c,childFilters:a,fetch:["Project","Name","c_TeamType","Children"],listeners:{scope:this,load:function(a,b,c){this.metricsMgr.buildMetrics(c)}}}).then({scope:this,success:function(a){var c=this.down("#gridArea");c.removeAll(),c.add({xtype:"rallytreegrid",store:a,enableBulkEdit:!1,enableRanking:!1,enableEditing:!1,enableScheduleStateClickable:!1,enabledValidationUi:!1,enableColumnHide:!0,shouldShowRowActionsColumn:!1,columnCfgs:[{text:"Name",dataIndex:"Name"},{text:"% Complete by Story Points",dataIndex:"PercentDoneByStoryPlanEstimate"},{text:"% Complete by Story Count",dataIndex:"PercentDoneByStoryCount"},{text:"Feature Cycle Time - Overall Median (Days)",xtype:"templatecolumn",tpl:new Ext.XTemplate(""),scope:this,renderer:function(a,b,c){return this.nanRenderer(c,"CycleTimeMedian")}},{text:"Feature Cycle Time - Last "+Ext.util.Format.plural(b,"Day","Days"),xtype:"templatecolumn",tpl:new Ext.XTemplate(""),scope:this,renderer:function(a,b,c){return this.nanRenderer(c,"CycleTimeCurrentPeriod")}},{text:"Feature Cycle Time - "+b+" Day Trend",tpl:"{CycleTimeTrend}",xtype:"templatecolumn",scope:this,renderer:function(a,b,c){return this.cycleTimeTrendRenderer(c,"CycleTimeTrend")}},{text:"Feature Throughput - Last "+Ext.util.Format.plural(b,"Day","Days"),xtype:"templatecolumn",tpl:new Ext.XTemplate(""),scope:this,renderer:function(a,b,c){return this.nanRenderer(c,"ThroughputMedian")}},{text:"Feature Throughput - "+b+" Day Trend",tpl:"{ThroughputTrend}",xtype:"templatecolumn",scope:this,renderer:function(a,b,c){return this.throughputTrendRenderer(c,"ThroughputTrend")}},{text:TsConstants.LABELS.WIP,xtype:"templatecolumn",tpl:new Ext.XTemplate(""),scope:this,renderer:function(a,b,c){return this.wipRenderer(c)}}]})}})},featuresPerTeam:function(a){var b=Ext.util.Format.plural(a.get("ActiveFeatures"),"Feature","Features"),c=Ext.util.Format.plural(a.get("TeamCount"),"Team","Teams");return b+" "+c},wipRenderer:function(a){var b=a.get("FeatureWipAverage"),c=b;return 0==TsMetricsUtils.showMetrics(a)?c="--":void 0===b?c="Loading...":(isNaN(b)?c="--":b==1/0?c=0:b>0&&1>b?c=1:(c=Math.round(b),c>=this.getSetting(TsConstants.SETTINGS.PER_TEAM_WIP_MAX)&&(c='<div class="colorcell caution">'+c+"</div>")),this.getSetting(TsConstants.SETTINGS.SHOW_WIP_RAW_DATA)&&(c+="<div>"+this.featuresPerTeam(a)+"</div>")),c},nanRenderer:function(a,b){var c=a.get(b),d=c;return 0==TsMetricsUtils.showMetrics(a)?d="--":void 0===c?d="Loading...":isNaN(c)&&(d="--"),d},cycleTimeTrendRenderer:function(a,b){var c=a.get(b),d=c;return 0==TsMetricsUtils.showMetrics(a)?d="--":void 0===c?d="Loading...":c>0?(d=this.getEmojiDiv("worse"),this.getSetting(TsConstants.SETTINGS.SHOW_TREND_RAW_DATA)&&(d+=Ext.util.Format.plural(Math.abs(c),"day","days")+" longer")):0>c?(d=this.getEmojiDiv("better"),this.getSetting(TsConstants.SETTINGS.SHOW_TREND_RAW_DATA)&&(d+=Ext.util.Format.plural(Math.abs(c),"day","days")+" shorter")):0==c?(d=this.getEmojiDiv("neutral"),this.getSetting(TsConstants.SETTINGS.SHOW_TREND_RAW_DATA)&&(d+="Unchanged")):d="--",d},getEmojiDiv:function(a){return'<div class="emojicell '+a+'">'+TsSvgIcons[a]+"</div>"},throughputTrendRenderer:function(a,b){var c=a.get(b),d=c;return 0==TsMetricsUtils.showMetrics(a)?d="--":void 0===c?d="Loading...":c>0?(d=this.getEmojiDiv("better"),this.getSetting(TsConstants.SETTINGS.SHOW_TREND_RAW_DATA)&&(d+=Ext.util.Format.plural(c,"more Feature","more Features"))):0>c?(d=this.getEmojiDiv("worse"),this.getSetting(TsConstants.SETTINGS.SHOW_TREND_RAW_DATA)&&(d+=Ext.util.Format.plural(Math.abs(c),"fewer Feature","fewer Features"))):0==c?(d=this.getEmojiDiv("neutral"),this.getSetting(TsConstants.SETTINGS.SHOW_TREND_RAW_DATA)&&(d+="Unchanged")):d="--",d},getSettingsFields:function(){return[{name:TsConstants.SETTINGS.PERIOD_LENGTH,xtype:"rallynumberfield",allowBlank:!1,allowDecimals:!1,allowOnlyWhitespace:!1,minValue:1,label:"Trend Time Period (Days)",labelWidth:300},{name:TsConstants.SETTINGS.SHOW_TREND_RAW_DATA,xtype:"rallycheckboxfield",label:TsConstants.LABELS.SHOW_TREND_RAW_DATA,labelWidth:300},{name:TsConstants.SETTINGS.INCLUDED_PROJECT_TEAM_TYPES,xtype:"rallyfieldvaluecombobox",itemId:TsConstants.SETTINGS.INCLUDED_PROJECT_TEAM_TYPES,model:"Project",field:"c_TeamType",allowBlank:!1,allowNoEntry:!0,editable:!1,multiSelect:!0,delimiter:",",listeners:{ready:function(a){var b=a.getStore();b.on("load",function(b,c,d){if(c.length){var e=Rally.getApp().getSetting(TsConstants.SETTINGS.INCLUDED_PROJECT_TEAM_TYPES).split(",");a.setValue(e)}})}},readyEvent:"ready",label:'Project Team Types to include in "'+TsConstants.LABELS.WIP+'" calculation.',labelWidth:300},{name:TsConstants.SETTINGS.PER_TEAM_WIP_MAX,xtype:"rallynumberfield",allowBlank:!1,allowDecimals:!1,allowOnlyWhitespace:!1,minValue:1,label:'Max "'+TsConstants.LABELS.WIP+'"',labelWidth:300},{name:TsConstants.SETTINGS.SHOW_WIP_RAW_DATA,xtype:"rallycheckboxfield",label:TsConstants.LABELS.SHOW_WIP_RAW_DATA,labelWidth:300}]}});

               Rally.launchApp('com.ca.TechnicalServices.PortfolioItemHealthSummary', {
                   name: 'Portfolio Item Health Summary'
               });
        });
    </script>

    <style type="text/css">

.colorcell {
    border-radius: 3px;
}

.caution {
    background-color: rgb(249, 203, 7);
}

.emojicell svg {
    height: 15px;
}

    </style>

</head>
<body></body>
</html>